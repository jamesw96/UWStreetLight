<!DOCTYPE html>
<html>
<head>
<title> UW Street Light Project by James Wang</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox-gl-js/v0.31.0/mapbox-gl.js'></script> 
<!-- // Path to the bundle, can be relative path [public/bundle.js]  -->
<link href='https://api.mapbox.com/mapbox-gl-js/v0.31.0/mapbox-gl.css' rel='stylesheet' />
<style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>

<body>
	<div id='map' style='width: 200vh; height: 100vh;'></div>
	<script> 

	mapboxgl.accessToken = 'pk.eyJ1IjoiamFtZXN3OTYiLCJhIjoiY2l5NmNjOGJzMDA3bjJxcWhsYWt6c25zdyJ9.Dm_l5wJ_aDplzCgGSx6e7g';
	var map = new mapboxgl.Map({
	    container: 'map', // container id
	    //style: 'mapbox://styles/mapbox/streets-v9',
	    style: 'mapbox://styles/mapbox/dark-v9',
	    center: [-122.3078, 47.6542], // starting position
	    zoom: 15, // starting zoom
	    maxZoom: 19,
	});
	map.addControl(new mapboxgl.GeolocateControl({
	    positionOptions: {
	        enableHighAccuracy: true
	    }
	}));

	map.addControl(new mapboxgl.NavigationControl());

	map.on('load', function(){
		map.addSource('streetlamp',{
			type: 'geojson',
			data: 'export.geojson'
		})
		map.addLayer({
			id: 'streetlamp',
			type: 'circle',
			source: 'streetlamp',
			paint:{
				'circle-color': '#ffbb00',
				'circle-opacity': 0.6,
				'circle-radius': {
					'base': 2.5,

					//do some math to make it stay the same in meters
					'stops': [[15,2.5],[17,25],[20, 270]]
				},
				'circle-blur': 0.3
			}
		})
		//make a request, get this url, turn it into geojson
		//Use map.getSource('streetlamp').setData(data);
	})

	</script>

	<!-- //Just need to have app here --> 
	
	<!--python -m "SimpleHTTPServer" -->
</body>
</html>